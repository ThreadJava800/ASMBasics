Turbo Assembler	 Version 4.1	    02/14/23 24:00:03	    Page 1
ramka.asm



      1	0000			     .model tiny
      2	0000			     .code
      3
      4				     org 100h
      5
      6				     locals @@
      7
      8	0100			     Start:
      9	0100  B8 0501			     mov ax, 0501h
     10	0103  BA 0502			     mov dx, 0502h
     11
     12	0106  BB B800			     mov bx, 0b800h
     13	0109  8E C3			     mov es, bx
     14	010B  BB 0988			     mov bx, 160d * 15d	+ 40d
     15
     16	010E  B9 001E			     mov cx, 30d
     17	0111  BF 000A			     mov di, 10d
     18
     19	0114  E8 0001			     call DrawRect
     20
     21	0117  C3			     ret
     22
     23				     ;-------------------------------------------------------------
     24				     ; Draws rectangle on screen with given borders
     25				     ;-------------------------------------------------------------
     26				     ; Entry:	     AX	- horizontal border
     27				     ;		     DX	- vertical   border
     28				     ;		     BX	- left highest point
     29				     ;		     CX	- horizontal size
     30				     ;		     DI	- vertical   size
     31				     ; Exit:	     None
     32				     ; Expects:	     ES	-> videomem (0b800h)
     33				     ; Destroys:     BP, SI
     34				     ;-------------------------------------------------------------
     35	0118			     DrawRect	     proc
     36
     37	0118  8B F7				     mov si, di		     ; i = di
     38	011A  EB 0C 90				     jmp @@MainCycle
     39
     40	011D  83 EE 01		     @@IterateI:     sub si, 1		     ; i--
     41
     42	0120  2B D9				     sub bx, cx		     ; start vertically
     43	0122  2B D9				     sub bx, cx
     44	0124  81 C3 00A0			     add bx, 160d	     ; new line
     45
     46	0128  8B E9		     @@MainCycle:    mov bp, cx		     ; j = cx
     47
     48	012A  83 EB 02				     sub bx, 2		     ; bx -= 2 (then i += 2 to print)
     49
     50	012D  83 FE 00				     cmp si, 00h
     51	0130  75 28				     jne @@DrawV
     52
     53	0132  83 C3 02		     @@ContinueMain: add bx, 2		     ; bx += 2 (watch previous comment)
     54	0135  83 FE 00				     cmp si, 00h
     55	0138  74 2A				     je	@@Exit		     ; if i == 0: exit(0)
     56
     57	013A  83 FD 00		     @@SecondCycle:  cmp bp, 00h
Turbo Assembler	 Version 4.1	    02/14/23 24:00:03	    Page 2
ramka.asm



     58	013D  74 20				     je	@@DrawRightV	     ; print left border (WORKS!)
     59
     60	013F  3B F7				     cmp si, di
     61	0141  74 12				     je	@@DrawH		     ; draw highest border
     62
     63	0143  83 FE 01				     cmp si, 01h
     64	0146  74 0D				     je	@@DrawH		     ; draw lowest border
     65
     66	0148			     @@ContinueSecond:
     67	0148  83 FD 00				     cmp bp, 00h
     68	014B  74 D0				     je	@@IterateI	     ; if j == 0: i++
     69
     70	014D  83 ED 01				     sub bp, 1		     ; else: j--
     71	0150  83 C3 02				     add bx, 2		     ; bx += 2
     72	0153  EB E5				     jmp @@SecondCycle
     73
     74	0155  26: 89 07		     @@DrawH:	     mov es:[bx], ax
     75	0158  EB EE				     jmp @@ContinueSecond
     76
     77	015A  26: 89 17		     @@DrawV:	     mov es:[bx], dx
     78	015D  EB D3				     jmp @@ContinueMain
     79
     80	015F  26: 89 17		     @@DrawRightV:   mov es:[bx], dx
     81	0162  EB E4				     jmp @@ContinueSecond
     82
     83	0164  C3		     @@Exit:	     ret
     84	0165					     endp
     85
     86				     end     Start
Turbo Assembler	 Version 4.1	    02/14/23 24:00:03	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/14/23"
??FILENAME			  Text	 "ramka	  "
??TIME				  Text	 "24:00:03"
??VERSION			  Number 040A
@32BIT				  Text	 0
@@CONTINUEMAIN			  Near	 DGROUP:0132
@@CONTINUESECOND		  Near	 DGROUP:0148
@@DRAWH				  Near	 DGROUP:0155
@@DRAWRIGHTV			  Near	 DGROUP:015F
@@DRAWV				  Near	 DGROUP:015A
@@EXIT				  Near	 DGROUP:0164
@@ITERATEI			  Near	 DGROUP:011D
@@MAINCYCLE			  Near	 DGROUP:0128
@@SECONDCYCLE			  Near	 DGROUP:013A
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 RAMKA
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
DRAWRECT			  Near	 DGROUP:0118
START				  Near	 DGROUP:0100

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  0165 Word	  Public  CODE
